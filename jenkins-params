pipeline{
    agent {
        label 'AGENT-1'
    }
    options{
        timeout(time: 10, unit: 'SECONDS') 
        disableConcurrentBuilds()
    }
    parameters{
        string(name: 'BRANCH_NAME', defaultValue: 'main', description: 'Branch to build')
        booleanParam(name: 'RUN_TESTS', defaultValue: true, description: 'Run test cases')
        choice(name: 'ENVIRONMENT', choices: ['dev', 'staging', 'prod'], description: 'Deployment environment')
        password(name: 'SECRET_PASSWORD', defaultValue: 'password', description: 'Secret password')
 
    }
    stages{
        stage('checkout'){
            steps{
                echo "branch name: ${BRANCH_NAME}"
            }
        }
        stage('build'){
            steps{
                sh 'echo "checkout"'
            }
        }
        stage('test') {
            steps{
                echo "test: ${RUN_TESTS}"
            }
        }
    }
    post{
        always{
            deleteDir()
        }
        success{
            echo "this will execute when pipleline success"
        }
    }
}